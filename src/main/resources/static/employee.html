<meta charset="utf-8"/>
<div class="row">
    <div class="col-xs-12">
        <div class="row">
            <div class="col-xs-12">
                <div class="clearfix">
                    <table class="no-border" style="display:inline">
                        <tr permission='employee_btn_listData' style="display:none">
                            <td style="padding: 0px 6px;">
                                标本实验编号
                            </td>
                            <td>
                                <div class="input-group">
                                    <input type="text" id="key_sample_code" class="form-control search-query" placeholder="标本实验编号" style="width:120px"/>
                                </div>
                            </td>
                            <td style="padding: 0px 6px;">
                                姓名
                            </td>
                            <td>
                                <div class="input-group">
                                    <input type="text" id="key_real_name" class="form-control search-query" placeholder="从业人员姓名" style="width:100px"/>
                                </div>
                            </td>
                            <td style="padding: 0px 6px;">
                                从业场所名称
                            </td>
                            <td>
                                <div class="input-group">
                                    <input type="text" id="key_work_site" class="form-control search-query" placeholder="从业场所名称" style="width:140px"/>
                                </div>
                            </td>
                            <td style="padding: 0px 6px;">
                                区域位置
                            </td>
                            <td>
                                <div class="input-group">
                                    <div id="environmentSearch" style="">
                                        <select class="clsProvince" id="key_province_id" style="height:34px;cursor:pointer;margin-top:-1px;" onchange="thisPage.getAreaData(this.value,'#environmentSearch','.clsCity','请选择省|市');"><option value=''>请选择省|市</option></select>
                                        <select class="clsCity" id="key_city_id" style="display:none;margin-top:4px;height:34px;cursor:pointer;margin-top:-4px;" onchange="thisPage.getAreaData(this.value,'#environmentSearch','.clsCounty','请选择地州市');"><option value=''></option></select>
                                        <select class="clsCounty" id="key_county_id" style="display:none;margin-top:4px;height:34px;cursor:pointer;margin-top:-8px;" onchange="thisPage.getAreaData(this.value,'#environmentSearch','.clsTowns','请选择区|县');"><option value=''></option></select>
                                    </div>
                                </div>
                            </td>
                        </tr>
                    </table>
                    <div class="hidden-480 pull-right tableTools-container" permission='employee_btn_listData' style="display:none;"></div>
                    <table class="no-border" style="display:inline">
                        <tr permission='employee_btn_listData' style="display:none">
                            <td style="padding: 0px 6px;">
                                采样日期
                            </td>
                            <td>
                                <div class="input-group">
                                    <input type="text" id="sampling_date_start" class="form-control search-query date-picker" placeholder="起始日期" style="width:90px;" data-date-format="yyyy-mm-dd"/>
                                    <input type="text" id="sampling_date_end" class="form-control search-query date-picker" placeholder="结束日期" style="width:90px;margin-left:4px;" data-date-format="yyyy-mm-dd"/>
                                </div>
                            </td>
                            <td style="padding: 0px 6px;">
                                检测日期
                            </td>
                            <td>
                                <div class="input-group">
                                    <input type="text" id="detection_date_start" class="form-control search-query date-picker" placeholder="起始日期" style="width:90px;" data-date-format="yyyy-mm-dd"/>
                                    <input type="text" id="detection_date_end" class="form-control search-query date-picker" placeholder="结束日期" style="width:90px;margin-left:4px;" data-date-format="yyyy-mm-dd"/>
                                </div>
                            </td>
                            <td style="padding: 0px 6px;">
                                检测结果
                            </td>
                            <td>
                                <div class="input-group">
                                    <span class="input-group-btn">
                                        <button data-toggle="dropdown" class="btn btn-primary btn-white dropdown-toggle col-sm-12" style="margin-left:0.01em;width:70px;min-width:70px;">
                                            <span id="searchDropdownresult">全部</span>
                                            <i class="ace-icon fa fa-angle-down"></i>
                                        </button>
                                        <ul class="dropdown-menu col-sm-12" style="margin-left:-1px;width:71px;min-width:71px;">
                                            <li>
                                                <a href="javascript:winFn.dropdown('#key_result','','#searchDropdownresult','全部');">全部</a>
                                            </li>
                                            <li>
                                                <a href="javascript:winFn.dropdown('#key_result','1','#searchDropdownresult','未做');">未做</a>
                                            </li>
                                            <li>
                                                <a href="javascript:winFn.dropdown('#key_result','2','#searchDropdownresult','阴性');">阴性</a>
                                            </li>
                                            <li>
                                                <a href="javascript:winFn.dropdown('#key_result','3','#searchDropdownresult','阳性');">阳性</a>
                                            </li>
                                        </ul>
                                        <input id="key_result" type="hidden"/>
                                    </span>
                                </div>
                            </td>
                            <td class="hidden-480" style="padding: 0px 6px;">
                                工种
                            </td>
                            <td>
                                <div class="input-group">
                                    <span class="input-group-btn">
                                        <button data-toggle="dropdown" class="btn btn-primary btn-white dropdown-toggle col-sm-12" style="margin-left:0.01em">
                                            <span id="searchDropdownprofession">全部</span>
                                            <i class="ace-icon fa fa-angle-down"></i>
                                        </button>
                                        <ul class="dropdown-menu col-sm-12" style="margin-left:-1px;width:99px;min-width:99px;" id="dropdownLabelkey_profession"></ul>
                                        <input id="key_profession" type="hidden"/>
                                    </span>
                                </div>
                            </td>
                            <td class="hidden-480" style="padding: 0px 6px;">
                                从业场所类型
                            </td>
                            <td>
                                <div class="input-group">
                                    <span class="input-group-btn">
                                        <button data-toggle="dropdown" class="btn btn-primary btn-white dropdown-toggle col-sm-12" style="margin-left:0.01em">
                                            <span id="searchDropdownwork_type">从业场所类型</span>
                                            <i class="ace-icon fa fa-angle-down"></i>
                                        </button>
                                        <ul class="dropdown-menu col-sm-12" style="margin-left:-1px;width:270px;min-width:270px;max-width:270px" id="dropdownOptionskey_work_type"></ul>
                                        <input id="key_work_type" type="hidden"/><!--注意搜索时隐藏域-->
                                    </span>
                                    <span class="input-group-btn">
                                        <button type="button" class="btn btn-inverse btn-white" id="btnSearch" permission='employee_btn_listData' style="display:none">
                                            <span class="ace-icon fa fa-search bigger-110"></span>
                                            搜索
                                        </button>
                                    </span>
                                </div>
                            </td>
                            <td>
                                <div class="input-group">
                                    <span class="input-group-btn">
                                        <button type="button" class="btn btn-inverse btn-white" id="btnAdd" permission='employee_btn_add' style="display:none">
                                            <span class="ace-icon glyphicon glyphicon-plus bigger-110"></span>
                                            添加
                                        </button>
                                    </span>
                                </div>
                            </td>
                            <td>
                                <div class="input-group">
                                    <span class="input-group-btn">
                                        <button type="button" class="btn btn-inverse btn-white" id="btnDel" permission='employee_btn_delByKeys' style="display:none">
                                            <span class="fa fa-trash red2 bigger-110"></span>
                                            删除
                                        </button>
                                    </span>
                                </div>
                            </td>
                            <td>
                                <div class="input-group">
                                    <span class="input-group-btn">
                                        <button type="button" class="btn btn-inverse btn-white" id="btnExport" permission='employee_btn_export' style="display:none">
                                            <span class="fa fa-download"></span>
                                            导出
                                        </button>
                                    </span>
                                </div>
                            </td>
                        </tr>
                    </table>
                </div>
                <table id="tableListEmployee" class="table table-striped table-bordered table-hover"></table>
            </div>
        </div>
    </div>
</div>
<div id="div_bs_employee_edit" style="display:none;padding:20px 0px;">
    <form class="form-horizontal" id="form_bs_employee_edit" role="form">
        <label class="col-sm-3 control-label no-padding-right" for="sample_code"><div class="hr-4"></div>标本实验编号</label>
        <div class="col-sm-7">
            <div class="hr-4"></div>
            <input type="text" id="sample_code" placeholder="标本实验编号" class="form-control"/>
        </div>
        <label class="col-sm-3 control-label no-padding-right"><div class="hr-4"></div>区域位置</label>
        <div class="col-sm-7" title="编辑|修改时不选择则保持原数据原区域">
            <div class="hr-4"></div>
            <div id="areaEnvironment">
                <select class="col-sm-12 clsProvince" id="EnvironmentProvinceId" style="cursor:pointer;" onchange="thisPage.getAreaData(this.value,'#areaEnvironment','.clsCity','请选择省|市');"><option value=''>请选择省|市</option></select>
                <select class="col-sm-12 clsCity" id="EnvironmentCityId" style="display:none;margin-top:4px;cursor:pointer;" onchange="thisPage.getAreaData(this.value,'#areaEnvironment','.clsCounty','请选择地州市');"><option value=''></option></select>
                <select class="col-sm-12 clsCounty" id="EnvironmentCountyId" style="display:none;margin-top:4px;cursor:pointer;" onchange="thisPage.getAreaData(this.value,'#areaEnvironment','.clsTowns','请选择区|县');"><option value=''></option></select>
            </div>
        </div>
        <label class="col-sm-3 control-label no-padding-right" for="real_name"><div class="hr-4"></div>人员姓名</label>
        <div class="col-sm-7">
            <div class="hr-4"></div>
            <input type="text" id="real_name" placeholder="人员姓名" class="form-control"/>
        </div>
        <label class="col-sm-3 control-label no-padding-right" for="phone"><div class="hr-4"></div>联系电话</label>
        <div class="col-sm-7">
            <div class="hr-4"></div>
            <input type="text" id="phone" placeholder="联系电话" class="form-control"/>
        </div>
        <label class="col-sm-3 control-label no-padding-right" for="gender"><div class="hr-4"></div>性别</label>
        <div class="col-sm-7">
            <div class="hr-4"></div>
            <div class="input-group">
                <span class="input-group-btn">
                    <button data-toggle="dropdown" class="btn btn-primary btn-white dropdown-toggle col-sm-12" style="margin-left:0.01em">
                        <span id="dropdownLabelgender">选择性别</span>
                        <i class="ace-icon fa fa-angle-down"></i>
                    </button>
                    <ul class="dropdown-menu col-sm-12" style="margin-left:-1px;width:333px;min-width:333px;max-width:333px">
                        <li>
                            <a id="gender_" href="javascript:winFn.dropdown('#gender','','#dropdownLabelgender','选择性别');">选择性别</a>
                        </li>
                        <li>
                            <a id="gender1" href="javascript:winFn.dropdown('#gender',1,'#dropdownLabelgender','男');">男</a>
                        </li>
                        <li>
                            <a id="gender2" href="javascript:winFn.dropdown('#gender',2,'#dropdownLabelgender','女');">女</a>
                        </li>
                    </ul>
                    <input id="gender" type="hidden"/>
                </span>
            </div>
        </div>
        <label class="col-sm-3 control-label no-padding-right" for="age"><div class="hr-4"></div>年龄</label>
        <div class="col-sm-7">
            <div class="hr-4"></div>
            <input type="text" id="age" placeholder="年龄" class="form-control"/>
        </div>
        <label class="col-sm-3 control-label no-padding-right" for="work_site"><div class="hr-4"></div>从业场所名称</label>
        <div class="col-sm-7">
            <div class="hr-4"></div>
            <input type="text" id="work_site" placeholder="从业场所名称" class="form-control"/>
        </div>
        <label class="col-sm-3 control-label no-padding-right" for="work_type"><div class="hr-4"></div>从业场所类型</label>
        <div class="col-sm-7">
            <div class="hr-4"></div>
            <div class="input-group">
                <span class="input-group-btn">
                    <button data-toggle="dropdown" class="btn btn-primary btn-white dropdown-toggle col-sm-12" style="margin-left:0.01em">
                        <span id="dropdownLabelwork_type">从业场所类型</span>
                        <i class="ace-icon fa fa-angle-down"></i>
                    </button>
                    <ul class="dropdown-menu col-sm-12" style="margin-left:-1px;width:333px;min-width:333px;max-width:333px" id="dropdownOptionswork_type"></ul><!--注意宽度,含有富文本编辑器宽度是448px-->
                    <input id="work_type" type="hidden"/>
                </span>
            </div>
        </div>
        <label class="col-sm-3 control-label no-padding-right" for="freeze_type"><div class="hr-4"></div>冷库类型</label>
        <div class="col-sm-7">
            <div class="hr-4"></div>
            <div class="input-group">
                <span class="input-group-btn">
                    <button data-toggle="dropdown" class="btn btn-primary btn-white dropdown-toggle col-sm-12" style="margin-left:0.01em">
                        <span id="dropdownLabelfreeze_type">冷库类型</span>
                        <i class="ace-icon fa fa-angle-down"></i>
                    </button>
                    <ul class="dropdown-menu col-sm-12" style="margin-left:-1px;width:275px;min-width:275px;max-width:275px" id="dropdownOptionsfreeze_type"></ul><!--注意宽度,含有富文本编辑器宽度是448px-->
                    <input id="freeze_type" type="hidden"/>
                </span>
            </div>
        </div>
        <label class="col-sm-3 control-label no-padding-right" for="profession"><div class="hr-4"></div>工种</label>
        <div class="col-sm-7">
            <div class="hr-4"></div>
            <div class="input-group">
                <span class="input-group-btn">
                    <button data-toggle="dropdown" class="btn btn-primary btn-white dropdown-toggle col-sm-12" style="margin-left:0.01em">
                        <span id="dropdownLabelprofession">工种</span>
                        <i class="ace-icon fa fa-angle-down"></i>
                    </button>
                    <ul class="dropdown-menu col-sm-12" style="margin-left:-1px;width:275px;min-width:275px;max-width:275px" id="dropdownOptionsprofession"></ul>
                    <input id="profession" type="hidden"/>
                </span>
            </div>
        </div>
        <label class="col-sm-3 control-label no-padding-right" for="cold_chain"><div class="hr-4"></div>是否冷链相关从业人员</label>
        <div class="col-sm-7">
            <div class="hr-4"></div>
            <div class="input-group">
                <span class="input-group-btn">
                    <button data-toggle="dropdown" class="btn btn-primary btn-white dropdown-toggle col-sm-12" style="margin-left:0.01em">
                        <span id="dropdownLabelcold_chain">选择选项</span>
                        <i class="ace-icon fa fa-angle-down"></i>
                    </button>
                    <ul class="dropdown-menu col-sm-12" style="margin-left:-1px;width:333px;min-width:333px;max-width:333px">
                        <li>
                            <a id="cold_chain_" href="javascript:winFn.dropdown('#cold_chain','','#dropdownLabelcold_chain','选择选项');">选择选项</a>
                        </li>
                        <li>
                            <a id="cold_chain0" href="javascript:winFn.dropdown('#cold_chain',0,'#dropdownLabelcold_chain','否|无');">否|无</a>
                        </li>
                        <li>
                            <a id="cold_chain1" href="javascript:winFn.dropdown('#cold_chain',1,'#dropdownLabelcold_chain','是|有');">是|有</a>
                        </li>
                    </ul>
                    <input id="cold_chain" type="hidden"/>
                </span>
            </div>
        </div>
        <label class="col-sm-3 control-label no-padding-right" for="sample_type"><div class="hr-4"></div>样本类型</label>
        <div class="col-sm-7">
            <div class="hr-4"></div>
            <div class="input-group">
                <span class="input-group-btn">
                    <button data-toggle="dropdown" class="btn btn-primary btn-white dropdown-toggle col-sm-12" style="margin-left:0.01em">
                        <span id="dropdownLabelsample_type">样本类型</span>
                        <i class="ace-icon fa fa-angle-down"></i>
                    </button>
                    <ul class="dropdown-menu col-sm-12" style="margin-left:-1px;width:275px;min-width:275px;max-width:275px" id="dropdownOptionssample_type"></ul><!--注意宽度,含有富文本编辑器宽度是448px-->
                    <input id="sample_type" type="hidden"/>
                </span>
            </div>
        </div>
        <label class="col-sm-3 control-label no-padding-right" for="sampling_date"><div class="hr-4"></div>采样日期</label>
        <div class="col-sm-7">
            <div class="hr-4"></div>
            <input type="text" id="sampling_date" placeholder="采样日期" class="form-control"/>
        </div>
        <label class="col-sm-3 control-label no-padding-right" for="detection_date"><div class="hr-4"></div>检测日期</label>
        <div class="col-sm-7">
            <div class="hr-4"></div>
            <input type="text" id="detection_date" placeholder="检测日期" class="form-control"/>
        </div>
        <label class="col-sm-3 control-label no-padding-right" for="result"><div class="hr-4"></div>核酸检测结果</label>
        <div class="col-sm-7">
            <div class="hr-4"></div>
            <div class="input-group">
                <span class="input-group-btn">
                    <button data-toggle="dropdown" class="btn btn-primary btn-white dropdown-toggle col-sm-12" style="margin-left:0.01em">
                        <span id="dropdownLabelresult">选择检测结果</span>
                        <i class="ace-icon fa fa-angle-down"></i>
                    </button>
                    <ul class="dropdown-menu col-sm-12" style="margin-left:-1px;width:333px;min-width:333px;max-width:333px">
                        <li>
                            <a id="result_" href="javascript:winFn.dropdown('#result','','#dropdownLabelresult','选择检测结果');">选择检测结果</a>
                        </li>
                        <li>
                            <a id="result1" href="javascript:winFn.dropdown('#result',1,'#dropdownLabelresult','未检测');">未检测</a>
                        </li>
                        <li>
                            <a id="result2" href="javascript:winFn.dropdown('#result',2,'#dropdownLabelresult','阴性');">阴性</a>
                        </li>
                        <li>
                            <a id="result3" href="javascript:winFn.dropdown('#result',3,'#dropdownLabelresult','阳性');">阳性</a>
                        </li>
                    </ul>
                    <input id="result" type="hidden"/>
                </span>
            </div>
        </div>
        <label class="col-sm-3 control-label no-padding-right" for="remark"><div class="hr-4"></div>备注</label>
        <div class="col-sm-7">
            <div class="hr-4"></div>
            <input type="text" id="remark" placeholder="备注" class="form-control"/>
        </div>
    </form>
</div>
<div id="divKeyColumns" style="display:none;padding:1px 0px;"></div>
<input type="hidden" id="bs_employee_edit_keyId"/>
<div style="display:none;">
    <input type="hidden" id="employee_btn_listData"/>
    <input type="hidden" id="employee_btn_add"/>
    <input type="hidden" id="employee_btn_delByKeys"/>
    <input type="hidden" id="employee_btn_export"/>
    <input type="hidden" id="employee_row_edit"/>
    <input type="hidden" id="employee_row_queryById"/>
    <input type="hidden" id="employee_row_delById"/>
</div>
<script type="text/javascript">
    var scripts = [null,null];
    $('.page-content-area').ace_ajax('loadScripts',scripts,function(){
        var tableDom = '#tableListEmployee';
        var inputEditKeyId = '#bs_employee_edit_keyId';
        $(function(){
            var urlRoute = '/employee/';/*请求controller层的url*/
            var getList = urlRoute + 'listData';/*获取数据列表,此处不需要添加的,已在请求的url添加了前缀*/
            var urlAdd = urlRoute + 'add';/*添加*/
            var urlEdit = urlRoute + 'edit';/*编辑*/
            var urlQueryById = urlRoute + 'queryById';/*根据id查询对应的数据*/
            var urlDelById = urlRoute + 'delById';/*根据id删除对应的数据*/
            var urlDelByKeys = urlRoute + 'delByKeys';/*批量删除*/
            var urlGetDicts = urlRoute + 'getDicts';
            var urlQueryAreaSelect = urlRoute + 'queryAreaSelect';/*获取区域数据*/
            var urlExportExcel = urlRoute + 'exportExcel';/*导出Excel*/
            var thisTable = pageDataTable.initDataTable({
                tableDom : tableDom,
                sAjaxSource: getList,
                fnServerParams : function(params){
                    params.push({"name":"sample_code","value":$("#key_sample_code").val()},{"name":"work_site","value":$("#key_work_site").val()},{"name":"province_id","value":$("#key_province_id").val()},{"name":"city_id","value":$("#key_city_id").val()},{"name":"county_id","value":$("#key_county_id").val()},{"name":"sampling_date_start","value":$("#sampling_date_start").val()},{"name":"sampling_date_end","value":$("#sampling_date_end").val()},{"name":"detection_date_start","value":$("#detection_date_start").val()},{"name":"detection_date_end","value":$("#detection_date_end").val()},{"name":"result","value":$("#key_result").val()},{"name":"work_type","value":$("#key_work_type").val()},{"name":"real_name","value":$("#key_real_name").val()},{"name":"profession","value":$("#key_profession").val()});
                },
                aoColumns : [
                    {
                        bSortable: false,
                        mData : "kid",
                        sWidth : "38px",
                        sClass : "center",
                        sTitle : '<label title="全选|不选"><input type="checkbox" class="ace" /><span class="lbl"></span></label>'
                    },
                    {
                        mData : "sample_code",
                        sTitle : "标本实验编号"
                    },
                    {
                        mData : "city_id",
                        sTitle : "市（州）"
                    },
                    {
                        mData : "county_id",
                        sTitle : "县（区）"
                    },
                    {
                        mData : "real_name",
                        sTitle : "姓名"
                    },
                    {
                        mData : "gender",
                        sTitle : "性别",
                        render : function(value,type,row,meta){
                            if(value == '1'){
                                return '男性';
                            }else if(value == '2'){
                                return '女性';
                            }else{
                                return "";
                            }
                        }
                    },
                    {
                        mData : "age",
                        sTitle : "年龄"
                    },
                    {
                        mData : "work_site",
                        sTitle : "从业场所名称"
                    },
                    {
                        mData : "work_type",
                        sTitle : "从业场所类型"
                    },
                    {
                        mData : "freeze_type",
                        sTitle : "冷库类型"
                    },
                    {
                        mData : "profession",
                        sTitle : "工种"
                    },
                    {
                        mData : "cold_chain",
                        sTitle : "是否冷链相关从业",
                        render : function(value,type,row,meta){
                            if(value == '1'){
                                return '是';
                            }else if(value == '0'){
                                return '否';
                            }else{
                                return "";
                            }
                        }
                    },
                    {
                        mData : "sample_type",
                        sTitle : "样本类型"
                    },
                    {
                        mData : "sampling_date",
                        sTitle : "采样日期"
                    },
                    {
                        mData : "detection_date",
                        sTitle : "检测日期"
                    },
                    {
                        mData : "result",
                        sTitle : "检测结果",
                        render : function(value,type,row,meta){
                            if(value == '1'){
                                return '未检测';
                            }else if(value == '2'){
                                return '阴性';
                            }else if(value == '3'){
                                return '阳性';
                            }else{
                                return "";
                            }
                        }
                    },
                    {
                        mData : "_kid_",
                        sTitle : "<label style='color:#000;margin-left:6px;' title='单行操作'>操作</label>",
                        bSortable : false,
                        sWidth : "6%"
                    }
                ],
                columnDefs : [
                    {
                        targets : 0,//指定的列
                        render : function(value,type,row,meta){//第1个参数可能会没有值!!!,当key不存在时就没有值
                            return '<label title="选择|取消"><input type="checkbox" name="kid" value="'+value+'" style="cursor:pointer;text-decoration:none;outline:none;"/><span class="lbl"></span></label>';
                        }
                    },
                    {
                        targets : -1,
                        render : function(value,type,row,meta){
                            var html = "<a href='javascript:thisPage.rowEdit("+meta.row+");' style='outline:none;text-decoration: none;color:#3b8cff;margin-left:6px;display:none' permission='employee_row_edit'>编辑</a>"+
                                "<a class='hidden-xs' href='javascript:thisPage.rowDel("+meta.row+");' style='outline:none;text-decoration: none;color:#f00;margin-left:6px;display:none' permission='employee_row_delById'>删除</a>";
                            return html;
                        }
                    },
                    {
                        targets: [7],
                        render: function (value,type,row,meta){
                            return pageDataTable.columnEllipsis(value,8);
                        }
                    },
                    {
                        targets: [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],
                        render: function (value,type,row,meta){
                            return pageDataTable.formatColumn(value);
                        }
                    },
                    {
                        "visible":false,//列的隐藏显示
                        "targets": [9]//指定列
                    }
                ]
            });
            pageDataTable.buttons(thisTable);
            pageDataTable.action(thisTable);
            pageDataTable.select(thisTable,tableDom);
            pageDataTable.tooltip();
            var thisJquery = $(tableDom).dataTable();
            thisPage = {
                init : function(){
                    this.addEvent();
                    winFn.initDate();
                    this.initDom();
                },
                initDom : function(){
                    thisPage.getAreaData('0','#environmentSearch','.clsProvince','选择省|市');
                    this.createDropdown();
                },
                getAreaData : function(pid,containerDom,selectDom,labelText){
                    selectArea.getData(urlQueryAreaSelect,pid,containerDom,selectDom,labelText);
                },
                createDropdown : function(){
                    layerFn.ajaxGet(urlGetDicts,{"pid":"0000000071e57be5ffffffffd5c23562"},function(data){
                        if(data.code === AppKey.code.code200){
                            winFn.initDropdown(data.data,'#dropdownOptionsprofession','#profession','#dropdownLabelprofession','工种');
                            winFn.initDropdown(data.data,'#dropdownLabelkey_profession','#key_profession','#searchDropdownprofession','全部');
                        }
                    });
                    /*layerFn.ajaxGet('getUrl',{},function(data){
                        if(data.code === AppKey.code.code200){
                            winFn.initDropdown(data.data,'#dropdownOptionsfreeze_type','#freeze_type','#dropdownLabelfreeze_type','冷库类型');
                        }
                    });
                    layerFn.ajaxGet('getUrl',{},function(data){
                        if(data.code === AppKey.code.code200){
                            winFn.initDropdown(data.data,'#dropdownOptionssample_type','#sample_type','#dropdownLabelsample_type','样本类型');
                        }
                    });*/
                    layerFn.ajaxGet(urlGetDicts,{pid:'fffffffffd06f648ffffffff98c8eec6'},function(data){
                        if(data.code === AppKey.code.code200){
                            winFn.initDropdown(data.data,'#dropdownOptionswork_type','#work_type','#dropdownLabelwork_type','从业场所类型');
                            winFn.initDropdown(data.data,'#dropdownOptionskey_work_type','#key_work_type','#dropdownLabelkey_work_type','从业场所类型');
                        }
                    });
                },
                addEvent : function(){
                    this.btnEvent();
                },
                btnEvent : function(){
                    $(tableDom +' tbody').on('dblclick','tr',function(){
                        if(verifyFn.inputRequired('#employee_row_edit')){
                            return;
                        }
                        thisPage.trDblclick(thisTable.row(this).data());
                    });
                    $('#btnAdd').on('click',function(){
                        thisPage.edit();
                    });
                    //搜索按钮
                    $('#btnSearch').on('click',function(){
                        thisPage.search();
                    });
                    //按钮组-自定义显示列
                    $('#iconColumn').parent().parent().on('click',function(){
                        pageDataTable.columnCustom(thisTable,tableDom,'#divKeyColumns');
                    });
                    //按钮组-搜索
                    $('#iconRefresh').parent().parent().on('click',function(){
                        thisPage.search();
                    });
                    $('#btnDel').on('click',function(){
                        thisPage.delKeys();
                    });
                    //导出
                    $('#btnExport').on('click',function(){
                        if(verifyFn.inputRequired('#employee_btn_export')){
                            layerFn.alert('没有删除操作权限',AppKey.code.code199);
                            return;
                        }
                        thisPage.exportExcel();
                    });
                },
                /*批量删除*/
                delKeys : function(){
                    var kids = '';
                    var index = 0;
                    $(tableDom + ' tbody input:checked').each(function(){
                        index ++;
                        var value = this.value;
                        if(value != null && value != ''){
                            if(kids.length > 0)
                                kids += ",";
                            kids += value;
                        }
                    });
                    if(kids == ''){
                        layerFn.alert('请选择要删除的数据!',AppKey.code.code199);
                        return;
                    }
                    if(verifyFn.inputRequired('#employee_btn_delByKeys')){
                        layerFn.alert('没有删除操作权限',AppKey.code.code199);
                        return;
                    }
                    layerFn.confirm('将要准备删除['+index+']数据且是无法恢复,确定要继续吗?',function(){
                        layerFn.delBatchHint(urlDelByKeys,kids,function(data){
                            thisPage.complete(data,null,true);
                        });
                    });
                },
                trDblclick : function(data){
                    thisPage.edit(data.kid);
                },
                exportExcel : function(){
                    var url = urlExportExcel+'?&sample_code='+$("#key_sample_code").val()+
                    '&work_site='+$("#key_work_site").val()+
                    '&province_id='+$("#key_province_id").val()+
                    '&city_id='+$("#key_city_id").val()+
                    '&county_id='+$("#key_county_id").val()+
                    '&sampling_date_start='+$("#sampling_date_start").val()+
                    '&sampling_date_end='+$("#sampling_date_end").val()+
                    '&detection_date_start='+$("#detection_date_start").val()+
                    '&detection_date_end='+$("#detection_date_end").val()+
                    '&result='+$("#key_result").val()+
                    '&work_type='+$("#key_work_type").val()+
                    '&real_name='+$("#key_real_name").val()+'&profession='+$("#key_profession").val()
                    layerFn.handleTop('请耐心等待,处理完成将会自动下载!',AppKey.code.code200);
                    winFn.getPageHashToken(url);
                },
                search : function(){
                    if(verifyFn.inputRequired('#employee_btn_listData')){
                        layerFn.alert('没有操作权限',AppKey.code.code199);
                        return;
                    }
                    $(tableDom + ' input[type=checkbox]').prop('checked',false);
                    thisTable.draw();
                },
                resetForm : function(){
                    winFn.clearFormData('#form_bs_employee_edit');
                },
                edit : function(kid){
                    var title = '添加';
                    if(kid != null && kid.length >0){
                        if(verifyFn.inputRequired('#employee_row_queryById')){
                            layerFn.alert('没有操作权限',AppKey.code.code199);
                            return;
                        }
                        title = '编辑';
                        winFn.setDomValue(inputEditKeyId,kid);
                        layerFn.queryByIdHint(urlQueryById,kid,function(data){
                            thisPage.openDialog(title,kid,data);
                        });
                    }else{
                        winFn.setDomValue(inputEditKeyId,'');
                        thisPage.openDialog(title);
                    }
                },
                openDialog : function(title,kid,map){
                    layerFn.addOrEdit(title,'#div_bs_employee_edit',['600px','500px'],function(index,layero){
                        //var editKey = winFn.getDomValue(inputEditKeyId);//用于某些值在新增时必填,编辑时可填可不填,填时则更新,否则不更新
                        //if(editKey == null){}
                        if(verifyFn.inputRequired('#sample_code')){
                            layerFn.alert('标本实验编号不能为空',AppKey.code.code199);
                            return;
                        }
                        if(verifyFn.inputRequired('#province_id')){
                            layerFn.alert('请选择省级区域',AppKey.code.code199);
                            return;
                        }
                        if(verifyFn.inputRequired('#city_id')){
                            layerFn.alert('市（州）不能为空',AppKey.code.code199);
                            return;
                        }
                        if(verifyFn.inputRequired('#county_id')){
                            layerFn.alert('县（区）不能为空',AppKey.code.code199);
                            return;
                        }
                        if(verifyFn.inputRequired('#real_name')){
                            layerFn.alert('人员姓名不能为空',AppKey.code.code199);
                            return;
                        }
                        if(verifyFn.inputRequired('#phone')){
                            layerFn.alert('联系电话不能为空',AppKey.code.code199);
                            return;
                        }
                        if(verifyFn.inputRequired('#gender')){
                            layerFn.alert('请选择人员性别',AppKey.code.code199);
                            return;
                        }
                        if(verifyFn.inputRequired('#age')){
                            layerFn.alert('年龄不能为空',AppKey.code.code199);
                            return;
                        }
                        if(verifyFn.inputRequired('#work_site')){
                            layerFn.alert('从业场所名称不能为空',AppKey.code.code199);
                            return;
                        }
                        if(verifyFn.inputRequired('#work_type')){
                            layerFn.alert('请选择从业场所类型',AppKey.code.code199);
                            return;
                        }
                        if(verifyFn.inputRequired('#profession')){
                            layerFn.alert('请选择工种',AppKey.code.code199);
                            return;
                        }
                        if(verifyFn.inputRequired('#cold_chain')){
                            layerFn.alert('请选择是否冷链相关从业人员',AppKey.code.code199);
                            return;
                        }
                        if(verifyFn.inputRequired('#sample_type')){
                            layerFn.alert('请选择样本类型',AppKey.code.code199);
                            return;
                        }
                        if(verifyFn.inputRequired('#sampling_date')){
                            layerFn.alert('采样日期不能为空',AppKey.code.code199);
                            return;
                        }
                        if(verifyFn.inputRequired('#detection_date')){
                            layerFn.alert('检测日期不能为空',AppKey.code.code199);
                            return;
                        }
                        if(verifyFn.inputRequired('#result')){
                            layerFn.alert('请选择核酸检测结果',AppKey.code.code199);
                            return;
                        }
                        var params = {
                            age : winFn.getDomValue('#age'),
                            city_id : winFn.getDomValue('#city_id'),
                            cold_chain : winFn.getDomValue('#cold_chain'),
                            county_id : winFn.getDomValue('#county_id'),
                            detection_date : winFn.getDomValue('#detection_date'),
                            freeze_type : winFn.getDomValue('#freeze_type'),
                            gender : winFn.getDomValue('#gender'),
                            phone : winFn.getDomValue('#phone'),
                            profession : winFn.getDomValue('#profession'),
                            province_id : winFn.getDomValue('#province_id'),
                            real_name : winFn.getDomValue('#real_name'),
                            remark : winFn.getDomValue('#remark'),
                            result : winFn.getDomValue('#result'),
                            sample_code : winFn.getDomValue('#sample_code'),
                            sample_type : winFn.getDomValue('#sample_type'),
                            sampling_date : winFn.getDomValue('#sampling_date'),
                            work_site : winFn.getDomValue('#work_site'),
                            work_type : winFn.getDomValue('#work_type'),
                            kid : winFn.getDomValue(inputEditKeyId)
                        };
                        var url = urlAdd;
                        if (kid != null && kid != ''){
                            url = urlEdit;
                            if(verifyFn.inputRequired('#employee_row_edit')){
                                layerFn.alert('没有编辑操作权限',AppKey.code.code199);
                                return;
                            }
                        }else{
                            if(verifyFn.inputRequired('#employee_btn_add')){
                                layerFn.alert('没有添加操作权限',AppKey.code.code199);
                                return;
                            }
                        }
                        layerFn.submit(url,params,function(data){
                            thisPage.complete(data,index,true);
                        });
                    });
                    thisPage.resetForm();//清空
                    if(map != null){
                        $.each(map.data,function(k,v){
                            try{
                                $('#'+k).val(v);
                                if(k == 'cold_chain'){
                                    winFn.editDropdown('#dropdownLabelcold_chain','cold_chain'+v);
                                }
                                if(k == 'freeze_type'){
                                    winFn.editDropdown('#dropdownLabelfreeze_type',v);
                                }
                                if(k == 'gender'){
                                    winFn.editDropdown('#dropdownLabelgender','gender'+v);
                                }
                                if(k == 'profession'){
                                    winFn.editDropdown('#dropdownLabelprofession',v);
                                }
                                if(k == 'result'){
                                    winFn.editDropdown('#dropdownLabelresult','result'+v);
                                }
                                if(k == 'sample_type'){
                                    winFn.editDropdown('#dropdownLabelsample_type',v);
                                }
                                if(k == 'work_type'){
                                    winFn.editDropdown('#dropdownLabelwork_type',v);
                                }
                            }catch(e){}
                        });
                    }else{
                        winFn.addDropdown('#dropdownLabelcold_chain','选择选项');
						winFn.addDropdown('#dropdownLabelfreeze_type','选择冷库类型');
                        winFn.addDropdown('#dropdownLabelgender','选择性别');
                        winFn.addDropdown('#dropdownLabelprofession','工种');
                        winFn.addDropdown('#dropdownLabelresult','选择检测结果');
						winFn.addDropdown('#dropdownLabelsample_type','样本类型');
						winFn.addDropdown('#dropdownLabelwork_type','选择类型');
				    }
                    thisPage.getAreaData('0','#areaEnvironment','.clsProvince','选择省|市');
                },
                rowEdit : function(index){
                    var row = thisJquery.fnGetData(index);
                    thisPage.edit(row.kid);
                },
                rowDel : function(index){
                    var row = thisJquery.fnGetData(index);
                    if(verifyFn.inputRequired('#employee_row_delById')){
                        layerFn.alert('没有删除操作权限',AppKey.code.code199);
                        return;
                    }
                    layerFn.confirm('删除后无法恢复,确定要删除吗?',function(){
                        layerFn.delByIdHint(urlDelById,row.kid,function(data){
                            thisPage.complete(data,null,true);
                        });
                    });
                },
                complete : function(data,index,search){
                    try{
                        if(index){
                            layerFn.closeIndex(index);
                        }
                        if(search){
                            thisPage.search();
                        }
                        if(data){
                            layerFn.handleResult(data.msg,data.code);
                        }
                    }catch(e){}
                }
            };
            thisPage.init();
        });
    });
</script>